!function(t){function e(e){for(var r,s,a=e[0],c=e[1],l=e[2],u=0,m=[];u<a.length;u++)s=a[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&m.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(d&&d(e);m.length;)m.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},o={0:0},i=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var d=c;i.push([3,1]),n()}([function(t,e,n){var r=n(1),o=n(2);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var i={insert:"head",singleton:!1};r(o,i);t.exports=o.locals||{}},,function(t,e,n){},function(t,e,n){"use strict";n.r(e);const r=document.querySelector(".text-field__area"),o=document.querySelector(".buttons__start"),i=document.querySelector(".buttons__stop"),s=document.querySelector(".radio-buttons"),a=document.querySelector(".text-field__input"),c=document.querySelector(".indicator-battery"),l=document.querySelector(".indicator__text"),d=document.querySelector(".statistics__btn");class u extends Error{constructor(t){super(t),this.name="HttpError"}}class m extends Error{constructor(t){super(t),this.name="ApiError",this.code=t}}class h extends Error{constructor(t){super(t),this.name="AppError"}}const p={isStart:!1,isTyping:!1,isLoading:!1,isModalWindow:!1},f="Форма тела пингвинов обтекаемая, \nчто идеально для передвижения в воде. \nМускулатура и устройство костей позволяют им под водой работать \nкрыльями почти как винтами. В отличие от других нелетающих птиц, \nпингвины имеют грудину с чётко выраженным килем, к которому крепится \nмощная мускулатура. Плавание под водой отличается от полёта в воздухе тем, \nчто на подъём крыла затрачивается та же энергия, что и на опускание, \nпоскольку сопротивление воды больше, чем сопротивление воздуха, \nпоэтому лопатки пингвинов имеют по сравнению с другими птицами \nбо́льшую поверхность, на которой крепится мускулатура, отвечающая \nза подъём крыла.";function g(t,e,n="common"){const r=e.getBoundingClientRect(),o=function({typeElem:t="div",classElem:e="",textElem:n,where:r=document.body}){const o=document.createElement(t);return o.className=e,o.textContent=n,r.append(o),o}({textElem:t,classElem:"tooltip"});o.setAttribute("data-tooltip",n),o.style.top="".concat(r.top+pageYOffset-o.offsetHeight-6,"px"),o.style.left="".concat(r.left+r.width/2+pageXOffset-o.offsetWidth/2,"px")}function b(t){let e=document.querySelector('div[data-tooltip="'.concat(t,'"]'));e&&(e.remove(),e=null)}function v(t="",{extraClass:e="",customBtnText:n="Click",helpHandlerCustomBtn:r=null,helpHandlerClose:o=null}={}){function i({target:t}){!function(t,e,n){if("hide"!==t.dataset.trriger)return;t.closest(".modal__btnCustom")&&e&&e();(n&&t.closest(".modal__btnClose")||n&&t.closest(".modal-overlay"))&&n();document.querySelectorAll(".modal, .modal-overlay").forEach(t=>t.remove()),document.removeEventListener("click",i)}(t,r,o)}document.body.insertAdjacentHTML("beforeend",'\n    <div class="modal modal-fixed-footer '.concat(e,'">\n      <div class="modal-content">\n        ').concat(t,'\n      </div>\n      <div class="modal-footer ').concat(e,'">\n      ').concat(r?'<button class="btn-flat modal__btnCustom" data-trriger="hide">'.concat(n,"</button>"):"",'\n        <button class="btn-flat modal__btnClose" data-trriger="hide">\n          Close\n        </button>\n      </div>\n    </div>\n    <div class="modal-overlay" data-trriger="hide"></div>')),document.addEventListener("click",i)}function y(t){return p.isLoading=!1,g("Начните печать для запуска таймера",r,"prestart"),r.innerHTML=t.replace(/./g,'<span class="char">$&</span>')}function S(t){if((t instanceof u||"TypeError"===t.name)&&(r.innerHTML="",v('\n      <h4>Сервис генерации случайного текста недоступен.</h4>\n      <p>Запустить с текстом, что есть у нас? Нажмите "Ок"</p>\n      <p>Для отмены нажмите "Close"</p>',{extraClass:"error",customBtnText:"Ок",helpHandlerCustomBtn:y.bind(this,f),helpHandlerClose:P})),t instanceof m){r.innerHTML="";const e="21"===t.code?"2 минуты":"пока не известно";v("\n      <h4>Сервис генерации случайного текста недоступен.</h4>\n      <p>Сколько ждать: ".concat(e,'</p>\n      <p>Запустить с текстом, что есть у нас? Нажмите "Ок"</p>\n      <p>Для отмены нажмите "Close"</p>'),{extraClass:"error",customBtnText:"Ок",helpHandlerCustomBtn:y.bind(this,f),helpHandlerClose:P})}}const C=document.querySelector(".timer"),L=C.querySelector(".timer__number");let E;function _(){if(p.isTyping)return E<5&&O(),L.textContent="".concat(--E),E<0?P():setTimeout(_,1e3)}function x(t){if(!p.isStart){if(0===t||"number"!=typeof t||Number.isNaN(t))throw new h("Некорректные данные для таймера");E=t,L.textContent="".concat(t),O()}}function O(){C.classList.add("timer--scale");const t=()=>{C.classList.remove("timer--scale"),C.removeEventListener("animationend",t)};C.addEventListener("animationend",t)}const w={numberOftypedChars:0,timeLimit:0,charsPerSec:0,numberOfErrors:0,timeIdInterval:null,startDate:0,initSpeedTyping(t=null){this.timeIdInterval=setInterval(()=>{const e=60*this.charsPerSec;this.charsPerSec=0,t&&t(e)},1e3)},addCorrectChar(){this.numberOftypedChars+=1,this.charsPerSec+=1},getFormatedStartDate(){return new Date(this.startDate).toLocaleString()},calcFinishSpeedCPS(){return 60*this.numberOftypedChars/this.timeLimit},createCurrentStatsHtml(){return'\n    <h4>Ваш результат</h4>\n    <ul class="statistics__infoList">\n      <li class="statistics__info">\n        Время старта: '.concat(this.getFormatedStartDate(),'\n      </li>\n      <li class="statistics__info">\n        Количество набранных символов: ').concat(this.numberOftypedChars,'\n      </li>\n      <li class="statistics__info">\n        Количество ошибок: ').concat(this.numberOfErrors,'\n      </li>\n      <li class="statistics__info">\n        Скорость набора сим./мин: ').concat(this.calcFinishSpeedCPS(),"\n      </li>\n    </ul>")},updateStatsinLocalStorage(){const t=localStorage.getItem("statistics")?JSON.parse(localStorage.getItem("statistics")):[];t.push({id:t.length?t.length+1:1,startDate:this.getFormatedStartDate(),speed:this.calcFinishSpeedCPS(),numberOfErrors:this.numberOfErrors}),localStorage.setItem("statistics",JSON.stringify(t))},finishStats(){this.startDate&&(clearInterval(this.timeIdInterval),this.updateStatsinLocalStorage(),v("".concat(this.createCurrentStatsHtml()),{helpHandlerClose:this.clearStats.bind(this)}))},clearStats(){this.numberOftypedChars=0,this.charsPerSec=0,this.numberOfErrors=0,this.timeIdInterval=null,this.startDate=null,this.timeLimit=0}};function T(t){const e=t<70?"low":t>=70&&t<170?"medium":"high",n=c.classList;n.contains("indicator-battery--".concat(e))||(H(),n.add("indicator-battery--".concat(e)),l.textContent=e)}function H(){c.classList.remove("indicator-battery--low","indicator-battery--medium","indicator-battery--high"),l.textContent=""}function q(){p.isLoading||(p.isTyping||(p.isTyping=!0,w.startDate=Date.now(),w.timeLimit=+s.querySelector("input:checked").value,r.firstElementChild.classList.add("current"),a.addEventListener("input",I),_(),b("prestart"),w.initSpeedTyping(T)),a.focus())}function I(){if(!p.isTyping)return;const t=a.value,e=t.charAt(t.length-1),n=r.querySelector(".char.current"),o=n.classList;if(e===n.textContent)return o.contains("error")&&o.remove("error"),w.addCorrectChar(),o.add("correct"),o.remove("current"),function(t,e){const{height:n,left:r}=t.getBoundingClientRect();if(null==t||!t.nextElementSibling)return;const{left:o,bottom:i}=t.nextElementSibling.getBoundingClientRect(),s=e.getBoundingClientRect().bottom-n;o<=r&&i>s&&(e.scrollTop+=n)}(n,r),n.nextElementSibling?void n.nextElementSibling.classList.add("current"):(P(),v("".concat(w.createCurrentStatsHtml()),{helpHandlerClose:w.clearStats.bind(w)}));o.contains("error")||(o.add("error"),w.numberOfErrors+=1)}function P(){p.isTyping=!1,document.removeEventListener("keydown",q),a.removeEventListener("input",I),a.blur(),a.value="",w.finishStats(),H(),D(),x(+s.querySelector("input:checked").value)}function k(){D(),p.isLoading=!0,r.innerHTML='\n    <div class="progress">\n      <div class="indeterminate"></div>\n    </div>\n  ',fetch("https://fish-text.ru/get?numbеr=4").then(t=>t.ok?t.json():Promise.reject(new u(t.statusText))).then(({status:t,text:e,errorCode:n})=>"success"===t?e:Promise.reject(new m(n))).then(y).catch(S),document.addEventListener("keydown",q)}function j(){p.isLoading||(P(),b("prestart"))}function D(){p.isStart=!p.isStart,d.classList.toggle("disabled"),s.classList.toggle("disabled"),o.classList.toggle("disabled"),i.classList.toggle("disabled")}function B(){const t=JSON.parse(localStorage.getItem("statistics"));v(t?t.reduceRight((t,e)=>t+"<ul>\n            <li>Сессия: ".concat(e.id,"</li>\n            <li>Время старта :").concat(e.startDate,"</li>\n            <li>Скорость набора сим./мин: ").concat(e.speed,"</li>\n            <li>Количество ошибок: ").concat(e.numberOfErrors,"</li>\n          </ul>"),"<h4>Все результаты</h4>"):"<h4>Результатов еще нет</h4>",{customBtnText:"Clear All",helpHandlerCustomBtn:()=>localStorage.removeItem("statistics")})}document.addEventListener("DOMContentLoaded",(function(){"true"===localStorage.getItem("night-theme")&&(document.querySelector('input[name="theme"]').checked=!0,document.body.classList.toggle("night-theme")),document.querySelector(".toggle-theme").addEventListener("change",({target:{checked:t}})=>{document.body.classList.toggle("night-theme"),localStorage.setItem("night-theme","".concat(t))})})),window.addEventListener("load",()=>{x(+s.querySelector("input:checked").value),s.addEventListener("change",({target:t})=>{x(+t.value)}),o.addEventListener("click",k),i.addEventListener("click",j),a.oncut=a.oncopy=a.onpaste=()=>!1,d.addEventListener("click",B)});n(0)}]);